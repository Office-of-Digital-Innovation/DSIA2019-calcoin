"use strict";var url="https://calcoin.blockchain.azure.com:3200/2eR_wZ-TYGrZ46Tcrp4WJFuM",provider=new ethers.providers.JsonRpcProvider(url),signer=provider.getSigner(0),abi=[{constant:!1,inputs:[{name:"agency",type:"address"},{name:"beneficiary",type:"address"},{name:"tokens",type:"uint256"}],name:"_disburse",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vendor",type:"address"},{name:"agency",type:"address"},{name:"tokens",type:"uint256"}],name:"_exchange",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"beneficiary",type:"address"},{name:"vendor",type:"address"},{name:"tokens",type:"uint256"}],name:"_spend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"acceptOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"},{name:"data",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"tokenAddress",type:"address"},{name:"tokens",type:"uint256"}],name:"transferAnyERC20Token",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"tokenOwner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Approval",type:"event"},{constant:!0,inputs:[],name:"Agency",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"AgencyName",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Amount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Beneficiary",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Description",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"newOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"State",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Vendor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],contractAddress="0x22B6fc253CE1066448a32e59a698e760D181cd76",contract=new ethers.Contract(contractAddress,abi,provider);function createWallet(t){new ethers.Wallet(t,provider)}function getBalance(e){return contract.balanceOf(e).then(function(t){return t.toString()},function(t){console.log("No balance found for: "+e)})}var myAddress="0x22B6fc253CE1066448a32e59a698e760D181cd76";function sendToken(){var n=document.getElementById("send-coin-button"),a=document.getElementById("send-alert"),s=document.getElementById("send-alert-message");n.innerHTML='Sending <i class="la la-circle-o-notch la-spin"></i>',n.classList.add("disabled"),n.setAttribute("onClick","javascript: void(0);");document.getElementById("from-address").value;var t=document.getElementById("from-private-key").value,e=document.getElementById("cam-qr-result").value,o=document.getElementById("coin-amount").value,i=new ethers.Wallet(t,provider),p=new ethers.Contract(contractAddress,abi,i);p.ontransfer=function(t,e,n){console.log("Transfer"),console.log("  From:   ",t),console.log("  To:     ",e),console.log("  Amount: ",text)},p.balanceOf(i.address).then(function(t){var e=ethers.utils.formatEther(t);console.log("Balance Before:",e)}),p.transfer(e,o).then(function(t){return console.log(t),t.wait()}).then(function(t){console.log("Mined Transaction in block: ",t.blockNumber),p.balanceOf(i.address).then(function(t){var e=ethers.utils.formatUnits(t,18);console.log("Balance After:",e),n.innerHTML='Send CalCoin <i class="la la-money"></i>',n.classList.remove("disabled"),n.setAttribute("onClick","sendToken()"),a.classList.remove("hide"),s.innerHTML='<i class="la la-thumbs-up"></i> Transfer completed!'})}).catch(function(t){console.log("nope"),a.classList.remove("hide"),s.innerHTML='<i class="la la-thumbs-down"></i> Unable to transfer',n.innerHTML='Send CalCoin <i class="la la-money"></i>',n.classList.remove("disabled"),n.setAttribute("onClick","sendToken()")})}jQuery(document).foundation();var web3=new Web3(Web3.currentProvider||new Web3.providers.WebsocketProvider("ws://calcoin.blockchain.azure.com:3300/2eR_wZ-TYGrZ46Tcrp4WJFuM"),null,{}),web3abi=[{constant:!1,inputs:[{name:"agency",type:"address"},{name:"beneficiary",type:"address"},{name:"tokens",type:"uint256"}],name:"_disburse",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vendor",type:"address"},{name:"agency",type:"address"},{name:"tokens",type:"uint256"}],name:"_exchange",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"beneficiary",type:"address"},{name:"vendor",type:"address"},{name:"tokens",type:"uint256"}],name:"_spend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"acceptOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"},{name:"data",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"tokenAddress",type:"address"},{name:"tokens",type:"uint256"}],name:"transferAnyERC20Token",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"tokenOwner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Approval",type:"event"},{constant:!0,inputs:[],name:"Agency",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"AgencyName",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Amount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Beneficiary",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Description",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"newOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"State",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Vendor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],web3Contract=(contractAddress="0x22B6fc253CE1066448a32e59a698e760D181cd76",new web3.eth.Contract(web3abi,contractAddress));function getAllToTransactions(t){return web3Contract.getPastEvents("Transfer",{filter:{to:t},fromBlock:0,toBlock:"latest"},function(t,e){t&&console.log(t)}).then(function(t){return t})}function getAllFromTransactions(t){return web3Contract.getPastEvents("Transfer",{filter:{to:t},fromBlock:0,toBlock:"latest"},function(t,e){t&&console.log(t)}).then(function(t){return t})}function getAllTransactions(t){return web3Contract.getPastEvents("allEvents",{fromBlock:0,toBlock:"latest"},function(t,e){t&&console.log(t)}).then(function(t){return t})}function getBlockTime(t){return web3.eth.getBlock(t).then(function(t){var e=t.timestamp,n=new Date(1e3*e);return n=n.toLocaleString()})}function animateCSS(t,e,n){var a=document.querySelector(t);a.classList.add("animated",e),a.addEventListener("animationend",function t(){a.classList.remove("animated",e),a.removeEventListener("animationend",t),"function"==typeof n&&n()})}!function(t){t(document).ready(function(){t(".generate-wallet").click(function(){createWallet()}),t(".wallet a").click(function(){t(".wallet-container").addClass("open-wallet"),animateCSS(".wallet-card","slideInUp"),animateCSS(".wallet-container","fadeIn")}),t(".wallet-close").click(function(){animateCSS(".wallet-card","slideOutDown"),animateCSS(".wallet-container","fadeOut",function(){t(".wallet-container").removeClass("open-wallet")})})})}(jQuery);