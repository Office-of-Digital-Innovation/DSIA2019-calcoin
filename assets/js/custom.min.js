"use strict";var url="https://calcoin.blockchain.azure.com:3200/2eR_wZ-TYGrZ46Tcrp4WJFuM",provider=new ethers.providers.JsonRpcProvider(url),signer=provider.getSigner(0),abi=[{constant:!1,inputs:[{name:"agency",type:"address"},{name:"beneficiary",type:"address"},{name:"tokens",type:"uint256"}],name:"_disburse",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vendor",type:"address"},{name:"agency",type:"address"},{name:"tokens",type:"uint256"}],name:"_exchange",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"beneficiary",type:"address"},{name:"vendor",type:"address"},{name:"tokens",type:"uint256"}],name:"_spend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"acceptOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"tokens",type:"uint256"},{name:"data",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"tokenAddress",type:"address"},{name:"tokens",type:"uint256"}],name:"transferAnyERC20Token",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokens",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"tokenOwner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"tokens",type:"uint256"}],name:"Approval",type:"event"},{constant:!0,inputs:[],name:"Agency",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"AgencyName",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Amount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenOwner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Beneficiary",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Description",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"newOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"State",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Vendor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],contractAddress="0x22B6fc253CE1066448a32e59a698e760D181cd76",contract=new ethers.Contract(contractAddress,abi,provider);function createWallet(e){new ethers.Wallet(e,provider)}function getBalance(t){return contract.balanceOf(t).then(function(e){return e.toString()},function(e){console.log("No balance found for: "+t)})}var myAddress="0xe58bdddb1da06a9bf6c47d25069007e4fcec46b9",filterFromMe=contract.filters.Transfer(myAddress),filterToMe=contract.filters.Transfer(null,myAddress),filterFromMeToMe=contract.filters.Transfer(myAddress,myAddress);function getAllTransactions(e){}function sendCoins(e){}function sendToken(){var n=document.getElementById("send-coin-button"),a=document.getElementById("send-alert"),s=document.getElementById("send-alert-message");n.innerHTML='Sending <i class="la la-circle-o-notch la-spin"></i>',n.classList.add("disabled"),n.setAttribute("onClick","javascript: void(0);");document.getElementById("from-address").value;var e=document.getElementById("from-private-key").value,t=document.getElementById("cam-qr-result").value,o=document.getElementById("coin-amount").value,i=new ethers.Wallet(e,provider),u=new ethers.Contract(contractAddress,abi,i);u.ontransfer=function(e,t,n){console.log("Transfer"),console.log("  From:   ",e),console.log("  To:     ",t),console.log("  Amount: ",text)},u.balanceOf(i.address).then(function(e){var t=ethers.utils.formatEther(e);console.log("Balance Before:",t)}),u.transfer(t,o).then(function(e){return console.log(e),e.wait()}).then(function(e){console.log("Mined Transaction in block: ",e.blockNumber),u.balanceOf(i.address).then(function(e){var t=ethers.utils.formatUnits(e,18);console.log("Balance After:",t),n.innerHTML='Send CalCoin <i class="la la-money"></i>',n.classList.remove("disabled"),n.setAttribute("onClick","sendToken()"),a.classList.remove("hide"),s.innerHTML='<i class="la la-thumbs-up"></i> Transfer completed!'})})}function animateCSS(e,t,n){var a=document.querySelector(e);a.classList.add("animated",t),a.addEventListener("animationend",function e(){a.classList.remove("animated",t),a.removeEventListener("animationend",e),"function"==typeof n&&n()})}contract.on(filterFromMe,function(e,t,n,a){console.log("I sent",n)}),contract.on(filterToMe,function(e,t,n,a){console.log("I received",n)}),contract.on(filterFromMeToMe,function(e,t,n,a){console.log("Myself to me",n)}),jQuery(document).foundation(),function(e){e(document).ready(function(){e(".generate-wallet").click(function(){createWallet()}),e(".wallet a").click(function(){e(".wallet-container").addClass("open-wallet"),animateCSS(".wallet-card","slideInUp"),animateCSS(".wallet-container","fadeIn")}),e(".wallet-close").click(function(){animateCSS(".wallet-card","slideOutDown"),animateCSS(".wallet-container","fadeOut",function(){e(".wallet-container").removeClass("open-wallet")})})})}(jQuery);